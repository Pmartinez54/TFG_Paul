#include <time.h>
#include <math.h>
#include <stdio.h>
#include <stdlib.h>

#include <linux/i2c-dev.h>
#include <i2c/smbus.h>



void  main(){

int file;
int adapter_nr = 1; /* probably dynamically determined */
char filename[20];

snprintf(filename, 19, "/dev/i2c-%d", adapter_nr);
file = open(filename, I2C_RDWR);
if (file < 0) {
  /* ERROR HANDLING; you can check errno to see what went wrong */
printf("%i",file);
  exit(1);
}
// print

int addr = 0x48; /* The I2C address */

if (ioctl(file, I2C_SLAVE, addr) < 0) {
  /* ERROR HANDLING; you can check errno to see what went wrong */
  exit(1);
}
}


res = i2c_smbus_read_word_data(file, reg);
if (res < 0) {
  /* ERROR HANDLING: i2c transaction failed */
} else {
  /* res contains the read word */
}
